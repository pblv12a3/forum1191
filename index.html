<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ForumsR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="favcon.png">
</head>
<body>

<header class="topbar">
  <a class="brandLink" href="index.html">
    <img class="brandLogo" src="favcon.png" alt="ForumsR">
    <span class="brandText">ForumsR</span>
  </a>

  <div class="topRight">
    <span id="userLabel" class="muted" style="color:#fff"></span>
    <button id="btnOpenSettings" class="hidden">Settings</button>
    <button id="btnLogout" class="hidden">Logout</button>
  </div>
</header>

<main class="container">

  <div id="loadingBanner" class="loadingBanner">
    Loading ForumsRâ€¦
  </div>

  <!-- SETTINGS -->
  <section id="settingsCard" class="hidden">
    <h2>Settings</h2>
    <div class="row">
      <button id="btnCloseSettings">Close</button>
    </div>
    <input id="settingsUsername" placeholder="New username (letters/numbers/._-)" />
    <input id="settingsPhotoUrl" placeholder="New profile picture URL (optional https://...)" />
    <button id="btnSaveSettings">Save</button>
    <div id="settingsMsg" class="muted"></div>
  </section>

  <!-- PROFILE -->
  <section id="profileCard">
    <h2>Create profile</h2>
    <input id="profileUsername" placeholder="Username (letters/numbers/._-)" />
    <input id="profilePhotoUrl" placeholder="Profile picture URL (optional https://...)" />
    <button id="btnSaveProfile">Save profile</button>
    <div id="profileMsg" class="muted"></div>
  </section>

  <!-- POST -->
  <section id="composerCard">
    <h2>New post</h2>

    <select id="postCategory">
      <option value="fr/nostupidquestions">fr/nostupidquestions</option>
      <option value="fr/stupidquestions">fr/stupidquestions</option>
      <option value="fr/general" selected>fr/general</option>
      <option value="fr/advice">fr/advice</option>
      <option value="fr/dumbkids">fr/dumbkids</option>
      <option value="fr/emo's">fr/emo's</option>
      <option value="fr/tech">fr/tech</option>
      <option value="fr/coding">fr/coding</option>
        <option value="fr/gaming">fr/gaming</option>
   <option value="fr/memes">fr/memes</option>
  <option value="fr/news">fr/news</option>
  <option value="fr/music">fr/music</option>
  <option value="fr/movies">fr/movies</option>
  <option value="fr/food">fr/food</option>
  <option value="fr/cars">fr/cars</option>
  <option value="fr/money">fr/money</option>
       <option value="fr/money">fr/money</option>
    </select>

    <input id="postTitle" placeholder="Title" />
    <textarea id="postBody" placeholder="Text"></textarea>
    <input id="imageUrl" placeholder="Image URL (optional https://...)" />
    <input id="videoUrl" placeholder="Video URL (optional https://...)" />
    <button id="btnPublish">Publish</button>
    <div id="publishMsg" class="muted"></div>
  </section>

  <!-- FEED -->
  <section id="feed">
    <h2>Posts</h2>

    <div class="row" style="margin:10px 12px;">
      <b style="font-size:12px;color:#607286;">Category:</b>
       <select id="categoryFilter" style="max-width:320px;">
  <option value="all" selected>All</option>
  <option value="fr/general">fr/general</option>
  <option value="fr/nostupidquestions">fr/nostupidquestions</option>
  <option value="fr/stupidquestions">fr/stupidquestions</option>
  <option value="fr/advice">fr/advice</option>
  <option value="fr/relationships">fr/relationships</option>
  <option value="fr/dumbkids">fr/dumbkids</option>
  <option value="fr/emo's">fr/emo's</option>
  <option value="fr/tech">fr/tech</option>
  <option value="fr/coding">fr/coding</option>
  <option value="fr/gaming">fr/gaming</option>
  <option value="fr/memes">fr/memes</option>
  <option value="fr/news">fr/news</option>
  <option value="fr/music">fr/music</option>
  <option value="fr/movies">fr/movies</option>
  <option value="fr/food">fr/food</option>
  <option value="fr/cars">fr/cars</option>
  <option value="fr/money">fr/money</option>
  <option value="fr/Update channel">fr/Update channel</option>
</select>
    </div>

    <div id="posts"></div>
  </section>

</main>

<!-- Reply dialog -->
<dialog id="replyDialog">
  <form method="dialog" class="dialogBox">
    <h3 id="replyToTitle">Reply</h3>
    <textarea id="replyText" placeholder="Write your reply..."></textarea>
    <div class="row">
      <button id="btnSendReply" type="button">Send reply</button>
      <button type="submit">Close</button>
    </div>
    <div id="replyMsg" class="muted"></div>
  </form>
</dialog>

<script type="module">
  // Badge proves JS is running
  document.body.insertAdjacentHTML(
    "beforeend",
    '<div style="position:fixed;bottom:8px;right:8px;background:#000;color:#0f0;padding:6px;font:12px monospace;z-index:99999">HOME JS LOADED</div>'
  );

  // only redirect to uhoh on real crashes
  const shouldRedirect = (reason) => {
    const m = String(reason?.code || reason?.message || reason || "");
    if (m.includes("chrome-extension://")) return false;
    return true;
  };
  window.addEventListener("error", (e) => { if (shouldRedirect(e?.error || e?.message)) location.href = "uhoh.html"; });
  window.addEventListener("unhandledrejection", (e) => { if (shouldRedirect(e?.reason)) location.href = "uhoh.html"; });

  import "./app_v3.js?v=8";
</script>

</body>
</html>



